<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PHARMPLUS-DIGITAL</title>
 <link rel="stylesheet"
 href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" >
</head>

<body>
  <div class="container"></div>
  <h1 class="display-4 mb-4">Fetch Drug Details For:</h1>
  <div class="d-flex">
    <button class="btn btn-primary mr-4 " id="getName">HBP</button>
    <button class="btn btn-success mr-4 " id="getDrugs">Diabetes</button>
    <button class="btn btn-warning mr-4 " id="getPosts">HBP $ Diabetes</button>
  </div>
  <hr>
  <div id="output"></div>
  <form id="addFeedback">
    
      <div class="form-group">
       <textarea id="body" class="form-control"
        placeholder="body"></textarea>
     </div>
     <input type="submit" class="btn btn-secondary" value="submit">
    
  </form>
  </div>

  <script>

    document.getElementById("getName").addEventListener('click', getName);
    document.getElementById("getDrugs").addEventListener('click', getDrugs);
    document.getElementById("getPosts").addEventListener('click', getPosts);
    document.getElementById("addFeedback").addEventListener('submit', addFeed);


    function getName(){
      fetch('hypertension.json')
      .then((res) => res.json())
      .then((data) => {
        let output = "<h2 class='mb-4'> Hypertension Drugs</h2";
          data.forEach(function(drug){
            output += `
            <div class="card card-body mb -3">
            <ul class="list-group mb-3">
              <li class="list-group item">Name: ${drug.name}</li>
              <li class="list-group item">Type: ${drug.type}</li>
              <li class="list-group item">Usage: ${drug.usage}</li>
              <li class="list-group item">Effects: ${drug.sideEffects}</li>
              </ul>
            </div>

            `;
          })
        document.getElementById("output").innerHTML = output;
      })
    }
    function getDrugs(){
      fetch('diabetes.json')
      .then((res) => res.json())
      .then((data) => {
        let output = "<h2 class='mb-4'>Diabetes Drugs</h2";
        data.forEach(function(drug){
          output += `
            <div class="card card-body mb -3">
            <ul class="list-group mb-3">
              <li class="list-group item">Name: ${drug.name}</li>
              <li class="list-group item">Type: ${drug.type}</li>
              <li class="list-group item">Usage: ${drug.usage}</li>
              <li class="list-group item">Effects: ${drug.sideEffects}</li>
              </ul>
            </div>

          `;

        });
        document.getElementById('output').innerHTML = output;

      }) 
    
    
    }

    function getPosts(){
      fetch('both.json')
      .then((res) => res.json())
      .then((data) => {
        let output = "<h2 class='mb-4'> Combined Drugs</h2";
        data.forEach(function(drug){
          output += `
           <div class="card card-body mb -3">
            <ul class="list-group mb-3">
              <li class="list-group item">Name: ${drug.name}</li>
              <li class="list-group item">Type: ${drug.type}</li>
              <li class="list-group item">Usage: ${drug.usage}</li>
              <li class="list-group item">Effects: ${drug.sideEffects}</li>
              </ul>


            </div>

          `;

        });
        document.getElementById('output').innerHTML = output;

      }) 
    
    
    }

    function addFeed(e){
      e.preventDefault();
      let title= document.getElementById('title').value;
      let body= document.getElementById('body').value;

      fetch('https://jsonplaceholder.typicode.com/posts', {
        method: 'POST' ,
        headers: {
          'Accept': 'application/json, text/plain, */*',
          'Content-type' :'application/json'
        },
        body:JSON.stringify ({title:title, body:body})
      })
      .then((res) => res.json())
      .then((data) => console.log(data))
    }

  </script>
</body>
</html>